import{cQ as e,r as t,A as a,t as n,u as i,j as s,aM as r,a7 as o,aF as l,ai as d,aI as c,v as m,i as u}from"./index-f3adcbf0.js";import{u as h,a as x,d as j,o as p,P as g,s as f,b as k,T as w,S as y}from"./index-0b9b5a79.js";import{F as v}from"./index-ba35f132.js";import{C as I,T as C,E as N}from"./index-c0a04009.js";import{R as S,C as q}from"./row-f19feb12.js";import{D as b}from"./DeleteOutlined-aa30af55.js";import"./Pagination-9c5859fa.js";import"./useChart-68a9f88a.js";import"./index-29f3d950.js";import"./ReloadOutlined-96a4c20c.js";const z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 328a60 60 0 10120 0 60 60 0 10-120 0zM852 64H172c-17.7 0-32 14.3-32 32v660c0 17.7 14.3 32 32 32h680c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-32 660H204V128h616v596zM604 328a60 60 0 10120 0 60 60 0 10-120 0zm250.2 556H169.8c-16.5 0-29.8 14.3-29.8 32v36c0 4.4 3.3 8 7.4 8h729.1c4.1 0 7.4-3.6 7.4-8v-36c.1-17.7-13.2-32-29.7-32zM664 508H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"robot",theme:"outlined"};var L=function(e,i){return t.createElement(a,n({},e,{ref:i,icon:z}))};
/**![robot](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMwMCAzMjhhNjAgNjAgMCAxMDEyMCAwIDYwIDYwIDAgMTAtMTIwIDB6TTg1MiA2NEgxNzJjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjY2MGMwIDE3LjcgMTQuMyAzMiAzMiAzMmg2ODBjMTcuNyAwIDMyLTE0LjMgMzItMzJWOTZjMC0xNy43LTE0LjMtMzItMzItMzJ6bS0zMiA2NjBIMjA0VjEyOGg2MTZ2NTk2ek02MDQgMzI4YTYwIDYwIDAgMTAxMjAgMCA2MCA2MCAwIDEwLTEyMCAwem0yNTAuMiA1NTZIMTY5LjhjLTE2LjUgMC0yOS44IDE0LjMtMjkuOCAzMnYzNmMwIDQuNCAzLjMgOCA3LjQgOGg3MjkuMWM0LjEgMCA3LjQtMy42IDcuNC04di0zNmMuMS0xNy43LTEzLjItMzItMjkuNy0zMnpNNjY0IDUwOEgzNjBjLTQuNCAwLTggMy42LTggOHY2MGMwIDQuNCAzLjYgOCA4IDhoMzA0YzQuNCAwIDgtMy42IDgtOHYtNjBjMC00LjQtMy42LTgtOC04eiIgLz48L3N2Zz4=) */const T=t.forwardRef(L);function F(){const a=h(),n=x(),{t:z}=i(),[L,F]=t.useState(!1),E=function(){const[a]=e();return t.useMemo((()=>a),[a])}(),[M]=v.useForm(),O=v.useWatch("email",M),H=v.useWatch("uniqueName",M),[V,P]=t.useState(void 0),[R,U]=t.useState({formValue:{...j},title:z("token.edit"),show:!1,onOk:e=>{U((e=>({...e,show:!1})))},onCancel:()=>{U((e=>({...e,show:!1})))}});t.useEffect((()=>{M.setFieldValue("email",E.get("email"))}),[E]);const W=[{title:z("token.email"),dataIndex:["account","email"],width:120,render:e=>s.jsx(r,{value:e,onClick:t=>p(e,z,t),readOnly:!0})},{title:"Unique Name",dataIndex:"uniqueName",align:"center",width:120},{title:z("token.password"),dataIndex:"password",align:"center",width:120},{title:z("token.gpt35Limit"),dataIndex:"gpt35Limit",align:"center",width:120,render:e=>-1==e?"无限制":e},{title:z("token.gpt4Limit"),dataIndex:"gpt4Limit",align:"center",width:120,render:e=>-1==e?"无限制":e},{title:z("token.refreshEveryday"),dataIndex:"refreshEveryday",align:"center",width:120,render:e=>e?s.jsx(I,{}):s.jsx(o,{})},{title:z("token.temporaryChat"),dataIndex:"temporaryChat",align:"center",width:80,render:e=>e?s.jsx(I,{}):s.jsx(o,{})},{title:z("token.expiresIn"),dataIndex:"expiresIn",align:"center",width:120,render:e=>0==e?"最大":e},{title:"Share Token",dataIndex:"shareToken",align:"center",width:120,render:e=>s.jsx(r,{value:e,onClick:t=>p(e,z,t),readOnly:!0})},{title:z("token.comment"),dataIndex:"comment",align:"center",render:e=>s.jsx(C.Text,{style:{maxWidth:500},ellipsis:!0,children:e})},{title:z("token.action"),key:"operation",align:"center",render:(e,t)=>s.jsxs(l.Group,{children:[s.jsx(d,{title:"登录并跳转至对话",placement:"bottom",children:s.jsx(l,{icon:s.jsx(T,{}),type:"primary",onClick:()=>G(t)})}),s.jsx(l,{icon:s.jsx(N,{}),type:"primary",onClick:()=>D(t)}),s.jsx(g,{title:z("token.deleteConfirm"),okText:"Yes",cancelText:"No",placement:"left",onConfirm:()=>K(t),children:s.jsx(l,{icon:s.jsx(b,{}),type:"primary",loading:V==t.accountId+t.uniqueName,danger:!0})})]})}],D=e=>{U({formValue:e,title:z("token.edit"),show:!0,onOk:(e,t)=>{n.mutate(e,{onSuccess:()=>{U((e=>({...e,show:!1})))},onSettled:()=>t(!1)})},onCancel:()=>{U((e=>({...e,show:!1})))}})},G=e=>{F(!0),c.info({content:"正在跳转至对话...",key:"chatLogin",duration:5}),f.chatLoginShare(e.uniqueName,e.password).then((e=>{e&&window.open(e,"_blank")})).finally((()=>{F(!1)}))},K=e=>{P(e.accountId+e.uniqueName),a.mutate(e,{onSettled:()=>{P(void 0)}})},{data:Q}=k({queryKey:["shareList",O,H],queryFn:()=>f.searchShare(O,H)});return s.jsxs(m,{direction:"vertical",size:"large",className:"w-full",children:[s.jsx(u,{children:s.jsx(v,{form:M,children:s.jsxs(S,{gutter:[16,16],children:[s.jsx(q,{span:6,lg:6,children:s.jsx(v.Item,{label:z("token.email"),name:"email",className:"!mb-0",children:s.jsx(r,{})})}),s.jsx(q,{span:6,lg:6,children:s.jsx(v.Item,{label:"Unique Name",name:"uniqueName",className:"!mb-0",children:s.jsx(r,{})})}),s.jsx(q,{span:12,lg:12,children:s.jsxs("div",{className:"flex justify-end",children:[s.jsx(l,{onClick:()=>{M.resetFields()},children:z("token.reset")}),s.jsx(l,{type:"primary",className:"ml-4",onClick:()=>{M.validateFields().then((e=>{M.submit()}))},children:z("token.search")})]})})]})})}),s.jsx(u,{title:z("token.shareList"),children:s.jsx(w,{rowKey:e=>e.accountId+e.uniqueName,size:"small",scroll:{x:"max-content"},pagination:{pageSize:10},columns:W,dataSource:Q,loading:L})}),s.jsx(y,{...R})]})}export{F as default};
