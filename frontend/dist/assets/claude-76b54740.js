import{u as e,j as a,aM as t,aF as s,ai as n,r as i,aI as o,v as r,i as l}from"./index-f7ab5e13.js";import{o as d,P as m,a as c,b as u,d as x,T as h}from"./entity-5338cde5.js";import{R as j,u as p}from"./RobotOutlined-ce8ba9d4.js";import{s as k,u as f}from"./shareService-42d4394b.js";import{S as y}from"./ShareModal-f5cba2b8.js";import{T as g,E as w}from"./index-8e537eef.js";import{F as N}from"./index-49b42c3a.js";import{R as S,C as q}from"./row-5814c07b.js";import{D as I}from"./DeleteOutlined-81f211ef.js";import"./Pagination-73d267c3.js";import"./index-46accfe0.js";import"./CheckOutlined-cb1ec32b.js";import"./index-f2019e83.js";function C(){const{t:C}=e(),b=[{key:"email",title:C("token.email"),dataIndex:["account","email"],width:120,render:e=>a.jsx(t,{value:e,onClick:a=>d(e,C,a),readOnly:!0})},{key:"uniqueName",title:"Unique Name",dataIndex:"uniqueName",align:"center",width:120},{key:"password",title:C("token.password"),dataIndex:"password",align:"center",width:120},{key:"expiresAt",title:C("token.expiresAt"),dataIndex:"expiresAt",align:"center",width:120,render:e=>""==e?"未知":e},{key:"comment",title:C("token.comment"),dataIndex:"comment",align:"center",render:e=>a.jsx(g.Text,{style:{maxWidth:500},ellipsis:!0,children:e})},{title:C("token.action"),key:"operation",align:"center",render:(e,t)=>a.jsxs(s.Group,{children:[a.jsx(n,{title:"登录并跳转至对话",placement:"bottom",children:a.jsx(s,{icon:a.jsx(j,{}),type:"primary",onClick:()=>K(t)})}),a.jsx(s,{icon:a.jsx(w,{}),type:"primary",onClick:()=>E(t)}),a.jsx(m,{title:C("token.deleteConfirm"),okText:"Yes",cancelText:"No",placement:"left",onConfirm:()=>P(t),children:a.jsx(s,{icon:a.jsx(I,{}),type:"primary",loading:R==t.accountId+t.uniqueName,danger:!0})})]})}],v=c(),F=u(),[O,L]=i.useState(!1),T=p(),[z]=N.useForm(),A=N.useWatch("email",z),M=N.useWatch("uniqueName",z),[R,V]=i.useState(void 0),[W,D]=i.useState({formValue:{...x},title:C("token.edit"),show:!1,onOk:e=>{D((e=>({...e,show:!1})))},onCancel:()=>{D((e=>({...e,show:!1})))}});i.useEffect((()=>{z.setFieldValue("email",T.get("email"))}),[T]);const E=e=>{D({formValue:e,title:C("token.edit"),show:!0,onOk:(e,a)=>{F.mutate(e,{onSuccess:()=>{D((e=>({...e,show:!1})))},onSettled:()=>a(!1)})},onCancel:()=>{D((e=>({...e,show:!1})))}})},K=e=>{L(!0),o.info({content:"正在跳转至对话...",key:"chatLogin",duration:5}),k.chatLoginShare(e.uniqueName,e.password).then((e=>{e&&window.open(e,"_blank")})).finally((()=>{L(!1)}))},P=e=>{V(e.accountId+e.uniqueName),v.mutate(e,{onSettled:()=>{V(void 0)}})},{data:U}=f({queryKey:["shareList","claude",A,M],queryFn:()=>k.searchShare("claude",A,M)});return a.jsxs(r,{direction:"vertical",size:"large",className:"w-full",children:[a.jsx(l,{children:a.jsx(N,{form:z,children:a.jsxs(S,{gutter:[16,16],children:[a.jsx(q,{span:6,lg:6,children:a.jsx(N.Item,{label:C("token.email"),name:"email",className:"!mb-0",children:a.jsx(t,{})})}),a.jsx(q,{span:6,lg:6,children:a.jsx(N.Item,{label:"Unique Name",name:"uniqueName",className:"!mb-0",children:a.jsx(t,{})})}),a.jsx(q,{span:12,lg:12,children:a.jsxs("div",{className:"flex justify-end",children:[a.jsx(s,{onClick:()=>{z.resetFields()},children:C("token.reset")}),a.jsx(s,{type:"primary",className:"ml-4",onClick:()=>{z.validateFields().then((e=>{z.submit()}))},children:C("token.search")})]})})]})})}),a.jsx(l,{title:C("token.shareList"),children:a.jsx(h,{rowKey:e=>e.accountId+e.uniqueName,size:"small",scroll:{x:"max-content"},pagination:{pageSize:10},columns:b,dataSource:U,loading:O})}),a.jsx(y,{...W})]})}export{C as default};
